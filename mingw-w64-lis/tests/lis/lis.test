package require buildtest

buildtest::sandbox {
	foreach build {{} static} {
		foreach scalar {real complex} {
			foreach precision {single double} {
				foreach exm {{} mpi openmp} {
					set cts [list $exm $scalar $precision $build]
					with cts {
						lappend cts c
						if {$scalar == "complex"} {set src test7.c} else {set src test4.c}
						autotest $cts lis-[variant $cts] $src {}
					}
					with cts {
						lappend cts fortran
						if {$scalar == "complex"} {
							set src test7f.F
							set run {}
						} else {
							set src test1f.F
							set run {testmat.mtx 1 out1 out2}
						}
						autotest $cts lis-[variant $cts] $src $run
					}
				}
			}
		}
	}
}
